(this["webpackJsonpweather-app"]=this["webpackJsonpweather-app"]||[]).push([[0],{30:function(e,t,n){},58:function(e,t,n){},60:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){},63:function(e,t,n){},64:function(e,t,n){},65:function(e,t,n){},66:function(e,t,n){},67:function(e,t,n){},68:function(e,t,n){},69:function(e,t,n){},70:function(e,t,n){},71:function(e,t,n){},72:function(e,t,n){},73:function(e,t,n){},74:function(e,t,n){},75:function(e,t,n){},76:function(e,t,n){},77:function(e,t,n){"use strict";n.r(t);var c={};n.r(c),n.d(c,"fetchWeatherStart",(function(){return L})),n.d(c,"fetchWeatherFail",(function(){return P})),n.d(c,"fetchWeatherComplete",(function(){return H})),n.d(c,"fetchWeather",(function(){return G})),n.d(c,"setCity",(function(){return U})),n.d(c,"getCityWoeidStart",(function(){return Y})),n.d(c,"getCityWoeidFail",(function(){return k})),n.d(c,"getCityWoeidComplete",(function(){return B})),n.d(c,"getCityWoeid",(function(){return J})),n.d(c,"toggleTemperatureUnit",(function(){return V}));var a,i=n(1),r=n.n(i),s=n(9),o=n.n(s),u=(n(30),n(7)),l=n(4),d=n(24),j=n(2);!function(e){e.DUMMY_ACTION_0="DUMMY_ACTION_0",e.DUMMY_ACTION_1="DUMMY_ACTION_1",e.FETCH_WEATHER_START="FETCH_WEATHER_START",e.FETCH_WEATHER_COMPLETE="FETCH_WEATHER_COMPLETE",e.FETCH_WEATHER_FAIL="FETCH_WEATHER_FAIL",e.CHANGE_SETTINGS_START="CHANGE_SETTINGS_START",e.CHANGE_SETTINGS_COMPLETE="CHANGE_SETTINGS_COMPLETE",e.CHANGE_SETTINGS_FAIL="CHANGE_SETTINGS_FAIL",e.GET_CITY_WOEID_START="GET_CITY_WOEID_START",e.GET_CITY_WOEID_COMPLETE="GET_CITY_WOEID_COMPLETE",e.GET_CITY_WOEID_FAIL="GET_CITY_WOEID_FAIL",e.SET_CITY="SET_CITY",e.TOGGLE_TEMPERATURE_UNIT="TOGGLE_TEMPERATURE_UNIT"}(a||(a={}));var h={temperature:0,situation:"",nextFiveDays:[],windSpeed:0,windDirection:0,windDirectionCompass:"",humidity:0,visibility:0,airPressure:0,loading:!0,weatherDate:"",abbr:""},b=function(e){return Object(j.a)(Object(j.a)({},e),{},{loading:!0})},m=function(e,t){return Object(j.a)(Object(j.a)({},t),{},{loading:!1})},O=function(e,t){var n=Object(j.a)({},t),c=e.payload[0];return n.temperature=c.the_temp,n.situation=c.weather_state_name,n.nextFiveDays=e.payload.slice(1),n.windSpeed=c.wind_speed,n.windDirection=c.wind_direction,n.windDirectionCompass=c.wind_direction_compass,n.humidity=c.humidity,n.visibility=c.visibility,n.airPressure=c.air_pressure,n.abbr=c.weather_state_abbr,n.loading=!1,Object(j.a)({},n)},p=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.FETCH_WEATHER_START:return b(e);case a.FETCH_WEATHER_COMPLETE:return O(t,e);case a.FETCH_WEATHER_FAIL:return m(0,e);default:return e}},f={weatherUnit:"C",distanceUnit:"miles",speedUnit:"mph"},T=function(e){var t=Object(j.a)({},e);return t.weatherUnit="C"===t.weatherUnit?"F":"C",t},E=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:f,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.TOGGLE_TEMPERATURE_UNIT:return T(e);default:return e}},_={latt_long:"",location_type:"",title:"",woeid:0,loading:!1},v=function(e){return Object(j.a)(Object(j.a)({},e),{},{loading:!0})},x=function(e,t){return Object(j.a)(Object(j.a)({},t),{},{loading:!1})},g=function(e,t){var n=Object(j.a)({},t),c=e.payload;return n.latt_long=c.latt_long,n.loading=!1,n.location_type=c.location_type,n.title=c.title,n.woeid=c.woeid,Object(j.a)({},n)},y=function(e,t){var n=Object(j.a)({},t),c=e.payload;return n.latt_long=c.latt_long,n.loading=!1,n.location_type=c.location_type,n.title=c.title,n.woeid=c.woeid,Object(j.a)({},n)},N=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:_,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case a.GET_CITY_WOEID_START:return v(e);case a.GET_CITY_WOEID_COMPLETE:return g(t,e);case a.GET_CITY_WOEID_FAIL:return x(0,e);case a.SET_CITY:return y(t,e);default:return e}},C=Object(l.c)({weather:p,settings:E,location:N}),w=window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__||l.d,I=Object(l.e)(C,{},w(Object(l.a)(d.a))),S=n(6),A=n.n(S),D=n(8),F=n(25),M=n.n(F),R=function(){var e=Object(D.a)(A.a.mark((function e(t,n,c){return A.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.abrupt("return",M.a.get("".concat(n).concat(t).concat(c)).then((function(e){return e.data})).catch((function(e){return console.log("AXIOS ERROR",e),e})));case 1:case"end":return e.stop()}}),e)})));return function(t,n,c){return e.apply(this,arguments)}}(),W="https://www.metaweather.com/api/location/",L=function(){return{type:a.FETCH_WEATHER_START}},P=function(e){return{type:a.FETCH_WEATHER_FAIL,payload:e}},H=function(e){return{type:a.FETCH_WEATHER_COMPLETE,payload:e}},G=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:44418;return function(){var t=Object(D.a)(A.a.mark((function t(n){var c,i;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:a.FETCH_WEATHER_START}),c="".concat(W).concat(e,"/"),t.prev=2,t.next=5,R(c,"http://weather-cors.trmov.com/","");case 5:i=t.sent,n({type:a.FETCH_WEATHER_COMPLETE,payload:i.consolidated_weather}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),n({type:a.FETCH_WEATHER_FAIL,payload:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()},U=function(e){return{type:a.SET_CITY,payload:e}},Y=function(){return{type:a.GET_CITY_WOEID_START}},k=function(e){return{type:a.GET_CITY_WOEID_FAIL,payload:e}},B=function(e){return{type:a.GET_CITY_WOEID_COMPLETE,payload:e}},J=function(e){return function(){var t=Object(D.a)(A.a.mark((function t(n){var c,i;return A.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:a.GET_CITY_WOEID_START}),c="".concat(W,"search/?query=").concat(e),t.prev=2,t.next=5,R(c,"http://weather-cors.trmov.com/","");case 5:i=t.sent,n({type:a.GET_CITY_WOEID_COMPLETE,payload:i[0]}),t.next=12;break;case 9:t.prev=9,t.t0=t.catch(2),n({type:a.GET_CITY_WOEID_FAIL,payload:t.t0.message});case 12:case"end":return t.stop()}}),t,null,[[2,9]])})));return function(e){return t.apply(this,arguments)}}()},V=function(){return{type:a.TOGGLE_TEMPERATURE_UNIT}},X=n(5),q=(n(58),n(0)),z=function(e){var t=e.onClickHandler;return Object(q.jsx)("button",{className:"searchPlacesButton",onClick:function(){return t()},children:Object(q.jsx)("span",{children:"Seach for places"})})},K=(n(60),function(){var e=Object(u.b)();return Object(i.useMemo)((function(){return Object(l.b)(c,e)}),[e])}),Q=function(){var e=K().getCityWoeid;return Object(q.jsx)("button",{className:"currentLocationButton",onClick:function(){return console.log("LOCATION CALL"),void R("http://ip-api.com/json/","http://weather-cors.trmov.com/","").then((function(t){console.log("DATA >>",t),"success"===t.status?"Frankfurt am Main"===t.city?(localStorage.setItem("location","Frankfurt"),e("Frankfurt")):(localStorage.setItem("location",t.city),e(t.city)):console.log("ERROR","Location could not be fetched")}))},children:Object(q.jsx)("span",{})})},Z=n(10),$=function(e){var t=e.src,n=e.placeholderImg,c=Object(Z.a)(e,["src","placeholderImg"]),a=Object(i.useState)(n||t),r=Object(X.a)(a,2),s=r[0],o=r[1],u=Object(i.useCallback)((function(){o(t)}),[t]);return Object(i.useEffect)((function(){var e=new Image;return e.src=t,e.addEventListener("load",u),function(){e.removeEventListener("load",u)}}),[t,u]),Object(q.jsx)("img",Object(j.a)(Object(j.a)({},c),{},{alt:s,src:s}))},ee=(n(61),function(e){var t=e.image,n=e.temperature,c=e.situationName,a="/assets/".concat(t);return Object(q.jsx)(q.Fragment,{children:Object(q.jsxs)("div",{className:"currentSitutation",children:[Object(q.jsx)("div",{className:"currentWeatherImage",children:Object(q.jsx)($,{src:a,height:"160"})}),Object(q.jsxs)("div",{className:"currentCondition",children:[Object(q.jsxs)("div",{className:"currentTemperature",children:[Object(q.jsx)("span",{className:"temperatureValue",children:n.val}),Object(q.jsx)("span",{className:"temperatureUnit",children:n.unit})]}),Object(q.jsx)("div",{className:"currentSituationName",children:Object(q.jsx)("span",{children:c})})]})]})})}),te=(n(62),function(e){var t=e.weatherDay,n=e.weatherDate,c=e.location;return Object(q.jsx)(q.Fragment,{children:Object(q.jsxs)("div",{className:"DateAndLocation",children:[Object(q.jsxs)("div",{className:"dateContainer",children:[Object(q.jsx)("span",{className:"daySpan",children:t}),Object(q.jsx)("span",{className:"dotSpan",children:"\u2022"}),Object(q.jsx)("span",{className:"dateSpan",children:n})]}),Object(q.jsx)("div",{className:"locationContainer",children:Object(q.jsx)("span",{children:c})})]})})}),ne=(n(63),function(e){var t=e.formVisible,n=e.hideForm,c=Object(i.useState)([]),a=Object(X.a)(c,2),r=a[0],s=a[1],o=Object(i.useState)({searching:!1,found:null}),u=Object(X.a)(o,2),l=u[0],d=u[1],j=K().setCity,h=Object(i.useRef)(null),b=r.map((function(e,t){return Object(q.jsx)("button",{onClick:function(){return function(e){var t=r[e];j(t),n()}(t)},children:Object(q.jsx)("span",{children:e.title})},e.woeid)}));return t?Object(q.jsxs)("div",{className:"searchPlacesForm",children:[Object(q.jsxs)("div",{className:"search-location",children:[Object(q.jsx)("input",{ref:h,type:"text",className:"search-location-input",placeholder:"Search location"}),Object(q.jsx)("input",{type:"button",value:"Search",className:"search-location-bt",onClick:function(){var e;s([]),d({searching:!0,found:null});var t="query=".concat(null===(e=h.current)||void 0===e?void 0:e.value);R("https://www.metaweather.com/api/location/search/?","http://weather-cors.trmov.com/",t).then((function(e){e.length>0?(s(e),d({searching:!1,found:!0})):(s([]),d({searching:!1,found:!1}))}))}})]}),Object(q.jsx)("div",{className:"cities-near",children:l.searching?Object(q.jsx)("div",{className:"Search-in-progress",children:" Search in progress"}):!l.searching&&l.found?b:l.searching||!1!==l.found?void 0:Object(q.jsx)("div",{className:"not-found",children:"Not found"})}),Object(q.jsx)("button",{className:"close-form",onClick:n,children:Object(q.jsx)("span",{})})]}):Object(q.jsx)("div",{})}),ce=u.c,ae=function(e){var t=new Date(e);return"".concat(["Sun","Mon","Tue","Wed","Thur","Fri","Sat"][t.getDay()],", ").concat(t.getDate()," ").concat(["Jan","Feb","Mar","Apr","May","Jun","Jul","Aug","Sep","Oct","Nov","Dec"][t.getMonth()])},ie=function(e,t){return{val:"C"===t?Math.floor(e):Math.floor(1.8*e+32),unit:"\xb0".concat(t)}},re=(n(64),function(e){var t=e.currentParams,n=ce((function(e){return e.location.title})),c=ce((function(e){return e.settings.weatherUnit}));console.log(c);var a=Object(i.useState)(!1),r=Object(X.a)(a,2),s=r[0],o=r[1];Object(i.useEffect)((function(){}),[s]);var u="".concat(t.abbr.toString(),".png"),l=new Date(Date.now()),d=ae(l);return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsxs)("div",{className:"current__top",children:[Object(q.jsx)(z,{onClickHandler:function(){o(!0)}}),Object(q.jsx)(Q,{})]}),Object(q.jsx)("div",{className:"current__mid",children:Object(q.jsx)(ee,{image:u,situationName:t.situation,temperature:ie(t.temperature,c)})}),Object(q.jsx)("div",{className:"current__bottom",children:Object(q.jsx)(te,{weatherDay:"Today",weatherDate:d,location:n})}),s&&Object(q.jsx)(ne,{formVisible:s,hideForm:function(){o(!1)}})]})}),se=(n(65),function(){var e=ce((function(e){return e.settings.weatherUnit})),t=K().toggleTemperatureUnit,n=["F","C"].map((function(n,c){return n===e?Object(q.jsxs)("button",{className:"active-unit",children:["\xb0",n]},"unitButton".concat(c)):Object(q.jsxs)("button",{onClick:t,children:["\xb0",n]},"unitButton".concat(c))}));return Object(q.jsx)("div",{className:"unitSelect",children:n})}),oe=(n(66),function(e){var t=e.day,n=e.image,c=e.temperatureMax,a=e.temperatureMin,i=ce((function(e){return e.settings.weatherUnit})),r=ie(c,i),s=ie(a,i),o="/assets/".concat(n);return Object(q.jsxs)("div",{className:"dayCard",children:[Object(q.jsx)("div",{className:"dateText",children:Object(q.jsx)("span",{children:t})}),Object(q.jsx)($,{src:o,height:"62"}),Object(q.jsxs)("div",{className:"temperatureMinMax",children:[Object(q.jsxs)("span",{className:"temperatureMax",children:[r.val,r.unit]}),Object(q.jsxs)("span",{className:"temperatureMin",children:[s.val,s.unit]})]})]})}),ue=(n(67),function(e){var t=e.forecasts.map((function(e,t){return Object(q.jsx)(oe,{day:e.day,image:e.image,temperatureMax:e.temperatureMax,temperatureMin:e.temperatureMin},"day".concat(t))}));return Object(q.jsx)("div",{className:"foreCasts",children:t})}),le=(n(68),n(69),function(e){var t=e.children,n=e.cardName,c=e.cardTitle,a="hightlight-item hightlight-".concat(n,"-item");return Object(q.jsxs)("div",{className:a,children:[Object(q.jsx)("div",{className:"hightlight-item-heading",children:c}),t]})}),de=(n(70),function(e){var t=e.angle;return Object(q.jsx)("span",{className:"wd-compass",children:Object(q.jsx)("em",{style:{transform:"rotate(".concat(t,"deg)")}})})}),je=(n(71),function(e){var t=e.windSpeed,n=e.windDirection,c=e.windDirectionCompass,a=e.speedUnit,i=t.toFixed(1);return Object(q.jsxs)(le,{cardTitle:"Wind status",cardName:"wind",children:[Object(q.jsxs)("div",{className:"windSpeed",children:[Object(q.jsx)("span",{className:"windSpeedNumber",children:i}),Object(q.jsx)("span",{className:"windSpeedUnit",children:a})]}),Object(q.jsxs)("div",{className:"windDirection",children:[Object(q.jsx)(de,{angle:n}),Object(q.jsx)("span",{className:"wd-text",children:c})]})]})}),he=(n(72),function(e){var t=e.value;e.colors;return Object(q.jsxs)("div",{className:"percentBar",children:[Object(q.jsxs)("div",{className:"barIndicators",children:[Object(q.jsx)("span",{children:"0"}),Object(q.jsx)("span",{children:"50"}),Object(q.jsx)("span",{children:"100"})]}),Object(q.jsx)("div",{className:"barItself",children:Object(q.jsx)("span",{className:"valueBar",style:{width:"calc( 100% * (".concat(t," / 100))")}})}),Object(q.jsx)("div",{className:"percent-symbol",children:"%"})]})}),be=(n(73),function(e){var t=e.humidityPercent;return Object(q.jsxs)(le,{cardTitle:"Humidity",cardName:"humidity",children:[Object(q.jsxs)("div",{className:"humidityPercent",children:[Object(q.jsx)("span",{className:"humidityPercentNumber",children:t}),Object(q.jsx)("span",{className:"humidityPercentSymbol",children:"%"})]}),Object(q.jsx)("div",{className:"humidityBar",children:Object(q.jsx)(he,{value:t,colors:["#E7E7EB","#FFEC65"]})})]})}),me=(n(74),function(e){var t=e.visibilityDistance,n=e.distanceUnit,c=t.toFixed(1);return Object(q.jsx)(le,{cardTitle:"Visibility",cardName:"visibility",children:Object(q.jsxs)("div",{className:"visibilityDistance",children:[Object(q.jsx)("span",{className:"visibilityDistanceNumber",children:c}),Object(q.jsx)("span",{className:"visibilityDistanceUnit",children:n})]})})}),Oe=(n(75),function(e){var t=e.pressureAmountNumber,n=e.pressureUnit;return Object(q.jsx)(le,{cardTitle:"Air Pressure",cardName:"pressure",children:Object(q.jsxs)("div",{className:"pressureAmount",children:[Object(q.jsx)("span",{className:"pressureAmountNumber",children:t}),Object(q.jsx)("span",{className:"pressureUnit",children:n})]})})}),pe=function(e){return Object(q.jsxs)("div",{className:"highlights",children:[Object(q.jsx)("h1",{children:"Today\u2019s Hightlights "}),Object(q.jsxs)("div",{className:"highlights-items",children:[Object(q.jsx)(je,{windSpeed:e.windSpeed,windDirectionCompass:e.windDirectionCompass,windDirection:e.windDirection,speedUnit:"mph"}),Object(q.jsx)(be,{humidityPercent:e.humidity}),Object(q.jsx)(me,{visibilityDistance:e.visibility,distanceUnit:"miles"}),Object(q.jsx)(Oe,{pressureAmountNumber:Math.floor(e.airPressure),pressureUnit:"mb"})]})]})},fe=function(e){var t=e.forecastsParams,n=t.nextFiveDays.map((function(e,t){return{day:0===t?"Tomorrow":ae(new Date(e.applicable_date)),image:"".concat(e.weather_state_abbr,".png"),temperatureMax:e.max_temp,temperatureMin:e.min_temp}})),c=(t.nextFiveDays,Object(Z.a)(t,["nextFiveDays"]));return Object(q.jsxs)(q.Fragment,{children:[Object(q.jsx)(se,{}),Object(q.jsx)(ue,{forecasts:n}),Object(q.jsx)(pe,Object(j.a)({},c))]})};n(76);var Te=function(){var e=Object(i.useState)(""),t=Object(X.a)(e,2),n=t[0],c=t[1],a=K(),r=a.fetchWeather,s=a.getCityWoeid,o=ce((function(e){return e.location.woeid})),u=ce((function(e){var t=e.weather,n=t.temperature,c=t.situation,a=t.nextFiveDays,i=t.windSpeed,r=t.windDirection,s=t.windDirectionCompass,o=t.humidity,u=t.visibility,l=t.airPressure;return{currentParams:{temperature:n,situation:c,abbr:t.abbr},forecastsParams:{nextFiveDays:a,windSpeed:i,windDirection:r,windDirectionCompass:s,humidity:o,visibility:u,airPressure:l},loadingParam:{loading:t.loading}}})),l=function(){var e=localStorage.getItem("location");null===e?R("http://ip-api.com/json/","http://weather-cors.trmov.com/","").then((function(e){"success"===e.status?"Frankfurt am Main"===e.city?(localStorage.setItem("location","Frankfurt"),c(e.city)):(localStorage.setItem("location",e.city),c(e.city)):console.log("ERROR","Location could not be fetched")})):c(e)};Object(i.useEffect)((function(){l()}),[]),Object(i.useEffect)((function(){0!==o&&r(o)}),[o]),Object(i.useEffect)((function(){console.log(n),""!==n&&s(n)}),[n]);var d=u.loadingParam.loading;return Object(q.jsx)("div",{className:"App",children:Object(q.jsxs)("main",{children:[Object(q.jsxs)("section",{className:"current",children:[d?Object(q.jsx)("div",{className:"loading-placeholder",children:Object(q.jsx)("span",{children:"Loading..."})}):null,Object(q.jsx)(re,{currentParams:u.currentParams})]}),Object(q.jsxs)("section",{className:"forecasts-highlights",children:[d?Object(q.jsx)("div",{className:"loading-placeholder",children:Object(q.jsx)("span",{children:"Loading..."})}):null,Object(q.jsx)(fe,{forecastsParams:u.forecastsParams})]})]})})},Ee=function(e){e&&e instanceof Function&&n.e(3).then(n.bind(null,78)).then((function(t){var n=t.getCLS,c=t.getFID,a=t.getFCP,i=t.getLCP,r=t.getTTFB;n(e),c(e),a(e),i(e),r(e)}))};o.a.render(Object(q.jsx)(r.a.StrictMode,{children:Object(q.jsx)(u.a,{store:I,children:Object(q.jsx)(Te,{})})}),document.getElementById("root")),Ee()}},[[77,1,2]]]);
//# sourceMappingURL=main.2de1955a.chunk.js.map